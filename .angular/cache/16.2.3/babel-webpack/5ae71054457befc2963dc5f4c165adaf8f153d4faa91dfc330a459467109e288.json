{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/movies.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction WatchlistComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"div\", 21)(2, \"div\");\n    i0.ɵɵelement(3, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 23)(5, \"h5\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 24);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 24);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"div\", 25);\n    i0.ɵɵelement(12, \"div\", 26);\n    i0.ɵɵelementStart(13, \"div\")(14, \"h5\", 14);\n    i0.ɵɵtext(15, \"Something could be added here\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"a\", 27);\n    i0.ɵɵlistener(\"click\", function WatchlistComponent_div_26_Template_a_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteFromWatchlist(movie_r1.id));\n    });\n    i0.ɵɵelement(17, \"i\", 28);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const movie_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", \"https://image.tmdb.org/t/p/w500\" + movie_r1.poster_path, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(movie_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" released: \", movie_r1.release_date, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" vote: \", movie_r1.vote_average, \" \");\n  }\n}\nexport class WatchlistComponent {\n  constructor(service) {\n    this.service = service;\n    this.watchlistMovies = [];\n  }\n  ngOnInit() {\n    let watchlistItems = localStorage.getItem('watchlist') || [];\n    let parsedWatchlistItems = watchlistItems ? JSON.parse(watchlistItems) : [];\n    console.log(`Watchlist: ${parsedWatchlistItems}`);\n    // let moviesFetch = this.service.getAllMovies().subscribe((moviesResponse) => {console.log(moviesResponse);})\n    // console.log(parsedWatchlistItems);\n    for (const movie of parsedWatchlistItems) {\n      this.service.getMovie(movie).subscribe(movie => {\n        console.log(movie);\n        this.watchlistMovies.push(movie);\n      });\n    }\n  }\n  deleteFromWatchlist(movieId) {\n    console.log(movieId);\n    //? Delete movie on the page\n    this.watchlistMovies.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1);\n    //? Delete from local storage\n    let watchlistArray = JSON.parse(localStorage.getItem('watchlist') ?? '[]');\n    console.log(watchlistArray);\n    watchlistArray.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1);\n  }\n}\n_class = WatchlistComponent;\n_class.ɵfac = function WatchlistComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.MoviesService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-watchlist\"]],\n  decls: 27,\n  vars: 1,\n  consts: [[1, \"h-100\"], [1, \"container\", \"h-100\"], [1, \"row\", \"d-flex\", \"justify-content-center\", \"align-items-center\", \"h-100\"], [1, \"col\", \"mt-5\", \"mb-4\"], [1, \"card\"], [1, \"card-body\"], [1, \"row\"], [1, \"col-lg-12\"], [1, \"mb-3\"], [1, \"text-body\"], [1, \"btn\", \"btn\"], [\"routerLink\", \"/\", 1, \"fas\", \"fa-long-arrow-alt-left\", \"me-2\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [1, \"mb-1\"], [1, \"mb-0\"], [1, \"text-muted\"], [\"href\", \"#!\", 1, \"text-body\"], [1, \"fas\", \"fa-angle-down\", \"mt-1\"], [1, \"container\", \"text-center\", \"row\", \"gap-0\"], [\"class\", \" container text-center card mb-3 col-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"text-center\", \"card\", \"mb-3\", \"col-5\"], [1, \"col\", \"card-body\"], [\"alt\", \"Shopping item\", 1, \"img-fluid\", \"rounded-3\", 2, \"width\", \"200px\", 3, \"src\"], [1, \"ms-3\"], [1, \"small\", \"mb-0\"], [1, \"d-flex\", \"flex-row\", \"align-items-center\"], [1, \"me-5\"], [1, \"btn\", 2, \"color\", \"#cecece\", 3, \"click\"], [1, \"fas\", \"fa-trash-alt\"]],\n  template: function WatchlistComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"div\", 7)(8, \"h5\", 8)(9, \"a\", 9)(10, \"button\", 10);\n      i0.ɵɵelement(11, \"i\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"Your Watchlist\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(13, \"hr\");\n      i0.ɵɵelementStart(14, \"div\", 12)(15, \"div\")(16, \"p\", 13);\n      i0.ɵɵtext(17, \"Watchlist\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\")(19, \"p\", 14)(20, \"span\", 15);\n      i0.ɵɵtext(21, \"Sort by:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"a\", 16);\n      i0.ɵɵtext(23, \"name \");\n      i0.ɵɵelement(24, \"i\", 17);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(25, \"div\", 18);\n      i0.ɵɵtemplate(26, WatchlistComponent_div_26_Template, 18, 4, \"div\", 19);\n      i0.ɵɵelementEnd()()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(26);\n      i0.ɵɵproperty(\"ngForOf\", ctx.watchlistMovies);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.RouterLink],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","WatchlistComponent_div_26_Template_a_click_16_listener","restoredCtx","ɵɵrestoreView","_r3","movie_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","deleteFromWatchlist","id","ɵɵadvance","ɵɵproperty","poster_path","ɵɵsanitizeUrl","ɵɵtextInterpolate","title","ɵɵtextInterpolate1","release_date","vote_average","WatchlistComponent","constructor","service","watchlistMovies","ngOnInit","watchlistItems","localStorage","getItem","parsedWatchlistItems","JSON","parse","console","log","movie","getMovie","subscribe","push","movieId","splice","findIndex","watchlistArray","ɵɵdirectiveInject","i1","MoviesService","selectors","decls","vars","consts","template","WatchlistComponent_Template","rf","ctx","ɵɵtemplate","WatchlistComponent_div_26_Template"],"sources":["M:\\ITI MEARN\\19. Angular\\MovieMarvels\\src\\app\\movies\\watchlist\\watchlist.component.ts","M:\\ITI MEARN\\19. Angular\\MovieMarvels\\src\\app\\movies\\watchlist\\watchlist.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MoviesService } from '../services/movies.service';\r\n\r\n@Component({\r\n  selector: 'app-watchlist',\r\n  templateUrl: './watchlist.component.html',\r\n  styleUrls: ['./watchlist.component.css']\r\n})\r\n\r\n\r\nexport class WatchlistComponent {\r\n  watchlistMovies: any[] = [];\r\n\r\n\r\n\r\n  constructor(private service: MoviesService){}\r\nngOnInit(){\r\n  let watchlistItems:any = localStorage.getItem('watchlist') || []\r\n  let parsedWatchlistItems = watchlistItems ? JSON.parse(watchlistItems) : [];\r\n\r\n\r\n  console.log(`Watchlist: ${parsedWatchlistItems}`);\r\n\r\n  // let moviesFetch = this.service.getAllMovies().subscribe((moviesResponse) => {console.log(moviesResponse);})\r\n  // console.log(parsedWatchlistItems);\r\n  \r\n  for (const movie of parsedWatchlistItems) {\r\n    this.service.getMovie(movie).subscribe((movie) => {\r\n      console.log(movie);\r\n      this.watchlistMovies.push(movie);})\r\n    }\r\n  }\r\n\r\n  deleteFromWatchlist(movieId:number){\r\n    console.log(movieId);\r\n    //? Delete movie on the page\r\n    this.watchlistMovies.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1)\r\n\r\n    //? Delete from local storage\r\n    let watchlistArray = JSON.parse(localStorage.getItem('watchlist')??'[]')\r\n    console.log(watchlistArray);\r\n    watchlistArray.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1)\r\n\r\n  }\r\n}","<section class=\"h-100\">\r\n  <div class=\"container h-100\">\r\n    <div class=\"row d-flex justify-content-center align-items-center h-100\">\r\n      <div class=\"col mt-5 mb-4\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-12\">\r\n                <h5 class=\"mb-3\">\r\n                  <a class=\"text-body\"\r\n                    ><button class=\"btn btn\">\r\n                      <i\r\n                        routerLink=\"/\"\r\n                        class=\"fas fa-long-arrow-alt-left me-2\"\r\n                      ></i></button\r\n                    >Your Watchlist</a\r\n                  >\r\n                </h5>\r\n                <hr />\r\n\r\n                \r\n\r\n                <div\r\n                  class=\"d-flex justify-content-between align-items-center mb-4\"\r\n                >\r\n                  <div>\r\n                    <p class=\"mb-1\">Watchlist</p>\r\n                  </div>\r\n                  <div>\r\n                    <p class=\"mb-0\">\r\n                      <span class=\"text-muted\">Sort by:</span>\r\n                      <a href=\"#!\" class=\"text-body\"\r\n                        >name <i class=\"fas fa-angle-down mt-1\"></i\r\n                      ></a>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div class=\"container text-center row gap-0\">\r\n                  <div\r\n                    class=\" container text-center card mb-3 col-5\"\r\n                    *ngFor=\"let movie of watchlistMovies\"\r\n                  >\r\n                    <div class=\"col card-body\">\r\n                      <!-- <div class=\"d-flex justify-content-around\">\r\n                        <div class=\"d-flex flex-row align-items-center\"> -->\r\n                          <div>\r\n                            <img\r\n                              [src]=\"\r\n                                'https://image.tmdb.org/t/p/w500' +\r\n                                movie.poster_path\r\n                              \"\r\n                              class=\"img-fluid rounded-3\"\r\n                              alt=\"Shopping item\"\r\n                              style=\"width: 200px\"\r\n                            />\r\n                          </div>\r\n                          <div class=\"ms-3\">\r\n                            <h5>{{ movie.title }}</h5>\r\n                            <p class=\"small mb-0\">\r\n                              released: {{ movie.release_date }}\r\n                            </p>\r\n                            <p class=\"small mb-0\">\r\n                              vote: {{ movie.vote_average }}\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                        <div class=\"d-flex flex-row align-items-center\">\r\n                          <div class=\"me-5\"></div>\r\n                          <div>\r\n                            <h5 class=\"mb-0\">Something could be added here</h5>\r\n                          </div>\r\n                          <a class=\"btn\" style=\"color: #cecece\" (click)=\"deleteFromWatchlist(movie.id)\"\r\n                            ><i class=\"fas fa-trash-alt\"></i\r\n                          ></a>\r\n                        </div>\r\n                      <!-- </div>\r\n                    </div> -->\r\n\r\n\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</section>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}