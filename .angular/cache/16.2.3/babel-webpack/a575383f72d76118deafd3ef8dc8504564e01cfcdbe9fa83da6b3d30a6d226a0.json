{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let WatchlistComponent = class WatchlistComponent {\n  constructor(service) {\n    this.service = service;\n    this.watchlistMovies = [];\n  }\n  ngOnInit() {\n    let watchlistItems = localStorage.getItem('watchlist') || [];\n    let parsedWatchlistItems = watchlistItems ? JSON.parse(watchlistItems) : [];\n    console.log(`Watchlist: ${parsedWatchlistItems}`);\n    // let moviesFetch = this.service.getAllMovies().subscribe((moviesResponse) => {console.log(moviesResponse);})\n    // console.log(parsedWatchlistItems);\n    for (const movie of parsedWatchlistItems) {\n      this.service.getMovie(movie).subscribe(movie => {\n        console.log(movie);\n        this.watchlistMovies.push(movie);\n      });\n    }\n  }\n  deleteFromWatchlist(movieId) {\n    console.log(movieId);\n    //? Delete movie on the page\n    this.watchlistMovies.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1);\n    //? Delete from local storage\n    let watchlistArray = JSON.parse(localStorage.getItem('watchlist') ?? '[]');\n    console.log(watchlistArray);\n    const index = watchlistArray.findIndex(id => id === movieId);\n    if (index !== -1) {\n      watchlistArray.splice(index, 1);\n      localStorage.setItem('watchlist', JSON.stringify(watchlistArray));\n    }\n  }\n};\nWatchlistComponent = __decorate([Component({\n  selector: 'app-watchlist',\n  templateUrl: './watchlist.component.html',\n  styleUrls: ['./watchlist.component.css']\n})], WatchlistComponent);","map":{"version":3,"names":["Component","WatchlistComponent","constructor","service","watchlistMovies","ngOnInit","watchlistItems","localStorage","getItem","parsedWatchlistItems","JSON","parse","console","log","movie","getMovie","subscribe","push","deleteFromWatchlist","movieId","splice","findIndex","id","watchlistArray","index","setItem","stringify","__decorate","selector","templateUrl","styleUrls"],"sources":["M:\\ITI MEARN\\19. Angular\\MovieMarvels\\src\\app\\movies\\watchlist\\watchlist.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MoviesService } from '../services/movies.service';\r\n\r\n@Component({\r\n  selector: 'app-watchlist',\r\n  templateUrl: './watchlist.component.html',\r\n  styleUrls: ['./watchlist.component.css']\r\n})\r\n\r\n\r\nexport class WatchlistComponent {\r\n  watchlistMovies: any[] = [];\r\n\r\n\r\n\r\n  constructor(private service: MoviesService){}\r\nngOnInit(){\r\n  let watchlistItems:any = localStorage.getItem('watchlist') || []\r\n  let parsedWatchlistItems = watchlistItems ? JSON.parse(watchlistItems) : [];\r\n\r\n\r\n  console.log(`Watchlist: ${parsedWatchlistItems}`);\r\n\r\n  // let moviesFetch = this.service.getAllMovies().subscribe((moviesResponse) => {console.log(moviesResponse);})\r\n  // console.log(parsedWatchlistItems);\r\n  \r\n  for (const movie of parsedWatchlistItems) {\r\n    this.service.getMovie(movie).subscribe((movie) => {\r\n      console.log(movie);\r\n      this.watchlistMovies.push(movie);})\r\n    }\r\n  }\r\n\r\n  deleteFromWatchlist(movieId:number){\r\n    console.log(movieId);\r\n    //? Delete movie on the page\r\n    this.watchlistMovies.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1)\r\n\r\n    //? Delete from local storage\r\n    let watchlistArray = JSON.parse(localStorage.getItem('watchlist') ?? '[]') as number[];\r\n    console.log(watchlistArray);\r\n  \r\n    const index = watchlistArray.findIndex(id => id === movieId);\r\n    if (index !== -1) {\r\n      watchlistArray.splice(index, 1);\r\n      localStorage.setItem('watchlist', JSON.stringify(watchlistArray));\r\n    }\r\n  }\r\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAUlC,WAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAK7BC,YAAoBC,OAAsB;IAAtB,KAAAA,OAAO,GAAPA,OAAO;IAJ3B,KAAAC,eAAe,GAAU,EAAE;EAIiB;EAC9CC,QAAQA,CAAA;IACN,IAAIC,cAAc,GAAOC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,EAAE;IAChE,IAAIC,oBAAoB,GAAGH,cAAc,GAAGI,IAAI,CAACC,KAAK,CAACL,cAAc,CAAC,GAAG,EAAE;IAG3EM,OAAO,CAACC,GAAG,CAAC,cAAcJ,oBAAoB,EAAE,CAAC;IAEjD;IACA;IAEA,KAAK,MAAMK,KAAK,IAAIL,oBAAoB,EAAE;MACxC,IAAI,CAACN,OAAO,CAACY,QAAQ,CAACD,KAAK,CAAC,CAACE,SAAS,CAAEF,KAAK,IAAI;QAC/CF,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC;QAClB,IAAI,CAACV,eAAe,CAACa,IAAI,CAACH,KAAK,CAAC;MAAC,CAAC,CAAC;;EAEvC;EAEAI,mBAAmBA,CAACC,OAAc;IAChCP,OAAO,CAACC,GAAG,CAACM,OAAO,CAAC;IACpB;IACA,IAAI,CAACf,eAAe,CAACgB,MAAM,CAAC,IAAI,CAAChB,eAAe,CAACiB,SAAS,CAACP,KAAK,IAAIA,KAAK,CAACQ,EAAE,KAAKH,OAAO,CAAC,EAAE,CAAC,CAAC;IAE7F;IACA,IAAII,cAAc,GAAGb,IAAI,CAACC,KAAK,CAACJ,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,IAAI,IAAI,CAAa;IACtFI,OAAO,CAACC,GAAG,CAACU,cAAc,CAAC;IAE3B,MAAMC,KAAK,GAAGD,cAAc,CAACF,SAAS,CAACC,EAAE,IAAIA,EAAE,KAAKH,OAAO,CAAC;IAC5D,IAAIK,KAAK,KAAK,CAAC,CAAC,EAAE;MAChBD,cAAc,CAACH,MAAM,CAACI,KAAK,EAAE,CAAC,CAAC;MAC/BjB,YAAY,CAACkB,OAAO,CAAC,WAAW,EAAEf,IAAI,CAACgB,SAAS,CAACH,cAAc,CAAC,CAAC;;EAErE;CACD;AAtCYtB,kBAAkB,GAAA0B,UAAA,EAP9B3B,SAAS,CAAC;EACT4B,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,4BAA4B;EACzCC,SAAS,EAAE,CAAC,2BAA2B;CACxC,CAAC,C,EAGW7B,kBAAkB,CAsC9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}