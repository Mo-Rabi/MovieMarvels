{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/movies.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction WatchlistComponent_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20)(2, \"div\", 21)(3, \"div\");\n    i0.ɵɵelement(4, \"img\", 22);\n    i0.ɵɵelementStart(5, \"a\", 23);\n    i0.ɵɵlistener(\"click\", function WatchlistComponent_div_25_Template_a_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteFromWatchlist(movie_r1.id));\n    });\n    i0.ɵɵelement(6, \"i\", 24);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const movie_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", \"https://image.tmdb.org/t/p/w500\" + movie_r1.poster_path, i0.ɵɵsanitizeUrl);\n  }\n}\nexport class WatchlistComponent {\n  constructor(service) {\n    this.service = service;\n    this.watchlistMovies = [];\n  }\n  ngOnInit() {\n    let watchlistItems = localStorage.getItem('watchlist') || [];\n    let parsedWatchlistItems = watchlistItems ? JSON.parse(watchlistItems) : [];\n    console.log(`Watchlist: ${parsedWatchlistItems}`);\n    // let moviesFetch = this.service.getAllMovies().subscribe((moviesResponse) => {console.log(moviesResponse);})\n    // console.log(parsedWatchlistItems);\n    for (const movie of parsedWatchlistItems) {\n      this.service.getMovie(movie).subscribe(movie => {\n        console.log(movie);\n        this.watchlistMovies.push(movie);\n      });\n    }\n  }\n  deleteFromWatchlist(movieId) {\n    console.log(movieId);\n    //? Delete movie on the page\n    this.watchlistMovies.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1);\n    //? Delete from local storage\n    let watchlistArray = JSON.parse(localStorage.getItem('watchlist') ?? '[]');\n    console.log(watchlistArray);\n    const index = watchlistArray.findIndex(id => id === movieId);\n    if (index !== -1) {\n      watchlistArray.splice(index, 1);\n      localStorage.setItem('watchlist', JSON.stringify(watchlistArray));\n    }\n  }\n}\n_class = WatchlistComponent;\n_class.ɵfac = function WatchlistComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.MoviesService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-watchlist\"]],\n  decls: 26,\n  vars: 1,\n  consts: [[1, \"h-100\"], [1, \"container\", \"h-100\"], [1, \"col\", \"mt-5\", \"mb-4\"], [1, \"card\"], [1, \"card-body\"], [1, \"row\"], [1, \"col-lg-12\"], [1, \"mb-3\"], [1, \"text-body\"], [1, \"btn\", \"btn\"], [\"routerLink\", \"/\", 1, \"fas\", \"fa-long-arrow-alt-left\", \"me-2\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"mb-4\"], [1, \"mb-1\"], [1, \"mb-0\"], [1, \"text-muted\"], [\"href\", \"#!\", 1, \"text-body\"], [1, \"fas\", \"fa-angle-down\", \"mt-1\"], [1, \"container\", \"text-center\", \"row\", \"gap-0\"], [\"class\", \" container text-center mb-3 col-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\", \"text-center\", \"mb-3\", \"col-4\"], [1, \"col\", \"card-body\", \"p-0\"], [1, \"d-flex\", \"justify-content-center\", \"p-0\", \"m-0\", \"border-0\"], [\"alt\", \"Shopping item\", 1, \"img-fluid\", \"rounded-3\", 2, \"width\", \"200px\", 3, \"src\"], [1, \"btn\", \"btn-outline-danger\", \"d-block\", 3, \"click\"], [1, \"fas\", \"fa-trash-alt\"]],\n  template: function WatchlistComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"section\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"div\", 6)(7, \"h5\", 7)(8, \"a\", 8)(9, \"button\", 9);\n      i0.ɵɵelement(10, \"i\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(11, \"Your Watchlist\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(12, \"hr\");\n      i0.ɵɵelementStart(13, \"div\", 11)(14, \"div\")(15, \"p\", 12);\n      i0.ɵɵtext(16, \"Watchlist\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\")(18, \"p\", 13)(19, \"span\", 14);\n      i0.ɵɵtext(20, \"Sort by:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"a\", 15);\n      i0.ɵɵtext(22, \"name \");\n      i0.ɵɵelement(23, \"i\", 16);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(24, \"div\", 17);\n      i0.ɵɵtemplate(25, WatchlistComponent_div_25_Template, 7, 1, \"div\", 18);\n      i0.ɵɵelementEnd()()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(25);\n      i0.ɵɵproperty(\"ngForOf\", ctx.watchlistMovies);\n    }\n  },\n  dependencies: [i2.NgForOf, i3.RouterLink],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵlistener","WatchlistComponent_div_25_Template_a_click_5_listener","restoredCtx","ɵɵrestoreView","_r3","movie_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","deleteFromWatchlist","id","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","poster_path","ɵɵsanitizeUrl","WatchlistComponent","constructor","service","watchlistMovies","ngOnInit","watchlistItems","localStorage","getItem","parsedWatchlistItems","JSON","parse","console","log","movie","getMovie","subscribe","push","movieId","splice","findIndex","watchlistArray","index","setItem","stringify","ɵɵdirectiveInject","i1","MoviesService","selectors","decls","vars","consts","template","WatchlistComponent_Template","rf","ctx","ɵɵtext","ɵɵtemplate","WatchlistComponent_div_25_Template"],"sources":["M:\\ITI MEARN\\19. Angular\\MovieMarvels\\src\\app\\movies\\watchlist\\watchlist.component.ts","M:\\ITI MEARN\\19. Angular\\MovieMarvels\\src\\app\\movies\\watchlist\\watchlist.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MoviesService } from '../services/movies.service';\r\n\r\n@Component({\r\n  selector: 'app-watchlist',\r\n  templateUrl: './watchlist.component.html',\r\n  styleUrls: ['./watchlist.component.css']\r\n})\r\n\r\n\r\nexport class WatchlistComponent {\r\n  watchlistMovies: any[] = [];\r\n\r\n\r\n\r\n  constructor(private service: MoviesService){}\r\nngOnInit(){\r\n  let watchlistItems:any = localStorage.getItem('watchlist') || []\r\n  let parsedWatchlistItems = watchlistItems ? JSON.parse(watchlistItems) : [];\r\n\r\n\r\n  console.log(`Watchlist: ${parsedWatchlistItems}`);\r\n\r\n  // let moviesFetch = this.service.getAllMovies().subscribe((moviesResponse) => {console.log(moviesResponse);})\r\n  // console.log(parsedWatchlistItems);\r\n  \r\n  for (const movie of parsedWatchlistItems) {\r\n    this.service.getMovie(movie).subscribe((movie) => {\r\n      console.log(movie);\r\n      this.watchlistMovies.push(movie);})\r\n    }\r\n  }\r\n\r\n  deleteFromWatchlist(movieId:number){\r\n    console.log(movieId);\r\n    //? Delete movie on the page\r\n    this.watchlistMovies.splice(this.watchlistMovies.findIndex(movie => movie.id === movieId), 1)\r\n\r\n    //? Delete from local storage\r\n    let watchlistArray = JSON.parse(localStorage.getItem('watchlist') ?? '[]') as number[];\r\n    console.log(watchlistArray);\r\n  \r\n    const index = watchlistArray.findIndex(id => id === movieId);\r\n    if (index !== -1) {\r\n      watchlistArray.splice(index, 1);\r\n      localStorage.setItem('watchlist', JSON.stringify(watchlistArray));\r\n    }\r\n  }\r\n}","<section class=\"h-100\">\r\n  <div class=\"container h-100\">\r\n    <!-- <div class=\"row d-flex justify-content-center align-items-center h-100\"> -->\r\n      <div class=\"col mt-5 mb-4\">\r\n        <div class=\"card\">\r\n          <div class=\"card-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-lg-12\">\r\n                <h5 class=\"mb-3\">\r\n                  <a class=\"text-body\"\r\n                    ><button class=\"btn btn\">\r\n                      <i\r\n                        routerLink=\"/\"\r\n                        class=\"fas fa-long-arrow-alt-left me-2\"\r\n                      ></i></button\r\n                    >Your Watchlist</a\r\n                  >\r\n                </h5>\r\n                <hr />\r\n\r\n                \r\n\r\n                <div\r\n                  class=\"d-flex justify-content-between align-items-center mb-4\"\r\n                >\r\n                  <div>\r\n                    <p class=\"mb-1\">Watchlist</p>\r\n                  </div>\r\n                  <div>\r\n                    <p class=\"mb-0\">\r\n                      <span class=\"text-muted\">Sort by:</span>\r\n                      <a href=\"#!\" class=\"text-body\"\r\n                        >name <i class=\"fas fa-angle-down mt-1\"></i\r\n                      ></a>\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n\r\n                <div class=\"container text-center row gap-0\">\r\n                  <div\r\n                    class=\" container text-center mb-3 col-4\"\r\n                    *ngFor=\"let movie of watchlistMovies\"\r\n                  >\r\n                    <div class=\"col card-body p-0\">\r\n                      <div class=\"d-flex justify-content-center p-0 m-0 border-0\">\r\n                          <div>\r\n                            <img\r\n                              [src]=\"\r\n                                'https://image.tmdb.org/t/p/w500' +\r\n                                movie.poster_path\r\n                              \"\r\n                              class=\"img-fluid rounded-3\"\r\n                              alt=\"Shopping item\"\r\n                              style=\"width: 200px\"\r\n                            />\r\n                            <a class=\"btn btn-outline-danger d-block\" (click)=\"deleteFromWatchlist(movie.id)\"\r\n                            ><i class=\"fas fa-trash-alt\"></i\r\n                          ></a>\r\n                          </div>\r\n                          <!-- <div class=\"ms-3\">\r\n                            <h5>{{ movie.title }}</h5>\r\n                            <p class=\"small mb-0\">\r\n                              released: {{ movie.release_date }}\r\n                            </p>\r\n                            <p class=\"small mb-0\">\r\n                              vote: {{ movie.vote_average }}\r\n                            </p>\r\n                          </div> -->\r\n\r\n                        \r\n                      </div>\r\n\r\n                    </div>\r\n\r\n\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    <!-- </div> -->\r\n  </div>\r\n</section>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}