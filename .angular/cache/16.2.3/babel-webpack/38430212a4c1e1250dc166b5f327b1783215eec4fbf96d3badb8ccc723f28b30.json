{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/movies.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction AllMoviesComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"a\", 5);\n    i0.ɵɵlistener(\"click\", function AllMoviesComponent_div_2_Template_a_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addToWatchlist(movie_r1));\n    });\n    i0.ɵɵelement(3, \"i\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"a\", 7);\n    i0.ɵɵlistener(\"click\", function AllMoviesComponent_div_2_Template_a_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const movie_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.goToMovie(movie_r1.id));\n    });\n    i0.ɵɵelement(5, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 9)(7, \"h5\", 10);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 11);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\", 11);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 12);\n    i0.ɵɵtext(14, \"Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"br\");\n    i0.ɵɵelementStart(16, \"button\", 13);\n    i0.ɵɵtext(17, \"Add to wishlist\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const movie_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", movie_r1.watchlistStatus ? \"fa fa-heart text-warning\" : \"fa-regular fa-heart text-warning\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", \"https://image.tmdb.org/t/p/w500\" + movie_r1.poster_path, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Title: \", movie_r1.title, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Popularity: \", movie_r1.popularity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Evaluation: \", movie_r1.vote_average, \"\");\n  }\n}\nexport class AllMoviesComponent {\n  constructor(service, router) {\n    this.service = service;\n    this.router = router;\n    this.movies = [];\n    this.watchlist = [];\n  }\n  ngOnInit() {\n    this.getMovies();\n  }\n  //? get all movies on the homepage\n  getMovies() {\n    this.service.getAllMovies().subscribe(res => {\n      this.movies = res.results;\n    });\n  }\n  //? navigate specific movie details\n  goToMovie(id) {\n    this.router.navigate(['details', id]);\n  }\n  //? Add/ remove movie to/ from watchlist then add it to Local storage\n  addToWatchlist(movie) {\n    //*if movie id isn't found, add it to watchlist array\n    if (!this.watchlist.includes(movie.id, 0)) {\n      this.watchlist.push(movie.id);\n      console.log(this.watchlist);\n      movie.watchlistStatus = !movie.watchlistStatus;\n      //*if movie id is already inside watchlist array found, remove it\n    } else {\n      let movieToRemove = this.watchlist.indexOf(movie.id);\n      this.watchlist.splice(movieToRemove, 1);\n      console.log(this.watchlist);\n      movie.watchlistStatus = !movie.watchlistStatus;\n    }\n    localStorage.setItem(\"watchlist\", JSON.stringify(this.watchlist));\n  }\n}\n_class = AllMoviesComponent;\n_class.ɵfac = function AllMoviesComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.MoviesService), i0.ɵɵdirectiveInject(i2.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-all-movies\"]],\n  decls: 4,\n  vars: 1,\n  consts: [[1, \"container\"], [1, \"row\", \"row-cols-1\", \"row-cols-md-3\", \"g-4\", \"mt-4\", \"p-5\"], [\"class\", \"col\", 4, \"ngFor\", \"ngForOf\"], [1, \"col\"], [1, \"card\"], [1, \"btn\", \"heart-icon\", 3, \"click\"], [3, \"ngClass\"], [\"routerLink\", \"\", 3, \"click\"], [\"alt\", \"...\", 1, \"card-img-top\", 3, \"src\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"btn\", \"btn-primary\"], [1, \"btn\", \"btn-warning\", \"mt-1\"]],\n  template: function AllMoviesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtemplate(2, AllMoviesComponent_div_2_Template, 18, 5, \"div\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(3, \"\\n4\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.movies);\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i2.RouterLink],\n  styles: [\"img[_ngcontent-%COMP%]{\\n  height: 300px;\\n}\\n.heart-icon[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  z-index: 1;\\n  padding: 5px;\\n  font-size: 25px;\\n\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW92aWVzL2FsbC1tb3ZpZXMvYWxsLW1vdmllcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBYTtBQUNmO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsTUFBTTtFQUNOLE9BQU87RUFDUCxVQUFVO0VBQ1YsWUFBWTtFQUNaLGVBQWU7O0FBRWpCIiwic291cmNlc0NvbnRlbnQiOlsiaW1ne1xyXG4gIGhlaWdodDogMzAwcHg7XHJcbn1cclxuLmhlYXJ0LWljb24ge1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogMDtcclxuICB6LWluZGV4OiAxO1xyXG4gIHBhZGRpbmc6IDVweDtcclxuICBmb250LXNpemU6IDI1cHg7XHJcblxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","AllMoviesComponent_div_2_Template_a_click_2_listener","restoredCtx","ɵɵrestoreView","_r3","movie_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","addToWatchlist","ɵɵelement","ɵɵelementEnd","AllMoviesComponent_div_2_Template_a_click_4_listener","ctx_r4","goToMovie","id","ɵɵtext","ɵɵadvance","ɵɵproperty","watchlistStatus","poster_path","ɵɵsanitizeUrl","ɵɵtextInterpolate1","title","popularity","vote_average","AllMoviesComponent","constructor","service","router","movies","watchlist","ngOnInit","getMovies","getAllMovies","subscribe","res","results","navigate","movie","includes","push","console","log","movieToRemove","indexOf","splice","localStorage","setItem","JSON","stringify","ɵɵdirectiveInject","i1","MoviesService","i2","Router","selectors","decls","vars","consts","template","AllMoviesComponent_Template","rf","ctx","ɵɵtemplate","AllMoviesComponent_div_2_Template"],"sources":["D:\\Projects\\MovieMarvels\\src\\app\\movies\\all-movies\\all-movies.component.ts","D:\\Projects\\MovieMarvels\\src\\app\\movies\\all-movies\\all-movies.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { MoviesService } from '../services/movies.service';\r\nimport { Router } from '@angular/router';\r\nimport { Movies } from 'src/app/shared/interfaces/movies';\r\n\r\n@Component({\r\n  selector: 'app-all-movies',\r\n  templateUrl: './all-movies.component.html',\r\n  styleUrls: ['./all-movies.component.css']\r\n})\r\nexport class AllMoviesComponent {\r\n  \r\n  movies: any[] = []\r\n  watchlist:number[] = []\r\n\r\n  constructor(private service: MoviesService, private router : Router) {}\r\n  ngOnInit() {\r\n    this.getMovies()\r\n  }\r\n  //? get all movies on the homepage\r\n  getMovies() {\r\n    this.service.getAllMovies().subscribe((res: any) => {\r\n      this.movies = res.results\r\n    })\r\n  }\r\n  //? navigate specific movie details\r\n  goToMovie(id : number){\r\n    this.router.navigate(['details',id])\r\n  }\r\n\r\n  //? Add/ remove movie to/ from watchlist then add it to Local storage\r\n  addToWatchlist(movie:Movies){\r\n    //*if movie id isn't found, add it to watchlist array\r\n   if ( !this.watchlist.includes(movie.id,0)){\r\n    this.watchlist.push(movie.id)\r\n    console.log(this.watchlist);\r\n    movie.watchlistStatus = !movie.watchlistStatus;\r\n    \r\n    //*if movie id is already inside watchlist array found, remove it\r\n    }else{\r\n      let movieToRemove = this.watchlist.indexOf(movie.id)\r\n      this.watchlist.splice(movieToRemove,1)\r\n      console.log(this.watchlist);\r\n      movie.watchlistStatus = !movie.watchlistStatus;\r\n    }\r\n    localStorage.setItem(\"watchlist\",JSON.stringify(this.watchlist))\r\n  }\r\n}","<div class=\"container\">\r\n  <div class=\"row row-cols-1 row-cols-md-3 g-4 mt-4 p-5\">\r\n    <div class=\"col\" *ngFor=\"let movie of movies\">\r\n      <div class=\"card\">\r\n        <a class=\"btn heart-icon\" (click)=\"addToWatchlist(movie)\">\r\n          <i\r\n            [ngClass]=\"\r\n              movie.watchlistStatus\r\n                ? 'fa fa-heart text-warning'\r\n                : 'fa-regular fa-heart text-warning'\r\n            \"\r\n          ></i>\r\n        </a>\r\n        <a routerLink=\"\" (click)=\"goToMovie(movie.id)\">\r\n          <img\r\n            [src]=\"'https://image.tmdb.org/t/p/w500' + movie.poster_path\"\r\n            class=\"card-img-top\"\r\n            alt=\"...\"\r\n          />\r\n        </a>\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">Title: {{ movie.title }}</h5>\r\n          <p class=\"card-text\">Popularity: {{ movie.popularity }}</p>\r\n          <p class=\"card-text\">Evaluation: {{ movie.vote_average }}</p>\r\n          <button class=\"btn btn-primary\">Details</button><br />\r\n          <button class=\"btn btn-warning mt-1\">Add to wishlist</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n4\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}